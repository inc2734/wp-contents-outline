!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ContentsOutline=t()}(this,function(){"use strict";var a=function(e,n){var i=[];return[].slice.call(e).forEach(function(e){var t=new r(e,n);t&&i.push(t)}),i},l=function(i,r){if("true"!==i.getAttribute("data-initialized")){var o=i.querySelector(".contents-outline");if(o)return new function(){var t=document.createElement("ol");r.headings.sort(function(e,t){return e.getBoundingClientRect().top-t.getBoundingClientRect().top});var e,n=0;[].slice.call(r.headings).forEach(function(e){var t;e.getAttribute("id")||(t=function e(t,n){return document.getElementById("".concat(t).concat(n))?e(t,n+1):n}("co-index-",n),e.setAttribute("id","co-index-".concat(t)),n=t+1)}),[].slice.call(r.headings).forEach(function(e){t=f(t,e)}),t.innerHTML||i.parentNode.removeChild(i),!0===r.moveToBefore1stHeading&&(e=r.headings[0]).parentNode.insertBefore(i,e),i.setAttribute("aria-hidden","false"),o.appendChild(t),i.setAttribute("data-initialized","true")}}function f(e,t,n){var i,r,o,c=2<arguments.length&&void 0!==n?n:2,a=parseInt(t.tagName.replace("H","")-c);if(Number.isNaN(a)&&(a=0),a<0)return e;if(!e)return e;if(0===a)e.appendChild((i=t,r=document.createElement("li"),(o=document.createElement("a")).textContent=i.textContent.replace(/[\n\r]/g,""),o.setAttribute("href","#".concat(i.getAttribute("id"))),r.appendChild(o),r));else{var l,d,u=function(e,t,n){var i=[].slice.call(e.children).slice(-1)[0];if(i){var r=i.querySelector("ol");return f(r||document.createElement("ol"),t,n+1)}}(e,t,c);if(!u)return e;e.children.length<1?((l=document.createElement("li")).appendChild(u),e.appendChild(l)):(d=[].slice.call(e.children).slice(-1)[0])&&d.appendChild(u)}return e}};function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={headings:document.querySelectorAll("h2, h3, h4, h5, h6"),moveToBefore1stHeading:!0},i={};for(var r in n)i[r]=void 0!==t[r]?t[r]:n[r];if("string"!=typeof e)return!0==e instanceof NodeList?a(e,i):!0==e instanceof HTMLElement?l(e,i):void 0;if(e.match(/^#/)){var o=document.querySelector(e);if(!o)return;return l(o,i)}var c=document.querySelectorAll(e);return c.length<1?void 0:a(c,i)}return r});
