!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ContentsOutline=t()}(this,function(){"use strict";const l=(e,t)=>{const n=[];return[].slice.call(e).forEach(e=>{e=new r(e,t);e&&n.push(e)}),n},d=(r,e)=>{if("true"!==r.getAttribute("data-initialized")){const t=r.querySelector(".contents-outline");if(t){const d=e.headings.filter(e=>{let t=e,n=!1,r=!1;for(;;){if(!t.parentNode||["#document","HTML","BODY"].includes(t.parentNode.nodeName))break;if(n="none"===window.getComputedStyle(t.parentNode).getPropertyValue("display"),r="hidden"===window.getComputedStyle(t.parentNode).getPropertyValue("visibility"),n||r)break;t=t.parentNode}return"none"!==window.getComputedStyle(e).getPropertyValue("display")&&"hidden"!==window.getComputedStyle(e).getPropertyValue("visibility")&&!n&&!r});if(d.length<1)r.parentNode.removeChild(r);else{d.sort((e,t)=>{return e.getBoundingClientRect().top-t.getBoundingClientRect().top});const c=(e,t)=>{return document.getElementById(`${e}${t}`)?c(e,t+1):t};let n=0;[].slice.call(d).forEach(e=>{var t;e.getAttribute("id")||(t=n,t=c("co-index-",t),e.setAttribute("id",`co-index-${t}`),n=t+1)});const a=e=>e?parseInt(e.tagName.replace("H","")):void 0;let o=0,i=void 0,l=[{level:void 0,tree:document.createElement("ol")}];const s=e=>{const t=document.createElement("li"),n=document.createElement("a");return n.textContent=e.textContent.replace(/[\n\r]/g,""),n.setAttribute("href",`#${encodeURI(e.getAttribute("id"))}`),t.appendChild(n),t},u=e=>{const t=document.createElement("ol");return t.appendChild(s(e)),t},f=e=>{var t=a(i),n=a(e),r=n<t;t<n?o++:r&&(o=o-t-n,o=o<0?0:o,o=l[o].level<n?o+1:o,n=l[0],l=[],l[0]=n),(e=>{if(l[o])l[o].tree.appendChild(s(e));else{l[o]={},l[o].tree=u(e);const t=[].slice.call(l[o-1].tree.children).slice(-1)[0];t.appendChild(l[o].tree)}l[o].level=a(e)})(e),i=e};if([].slice.call(d).forEach(e=>f(e)),!0===e.moveToBefore1stHeading){const p=d[0];p.parentNode.insertBefore(r,p)}if("function"==typeof IntersectionObserver){const h=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=r.querySelector('[data-is-current="true"]');t&&t.removeAttribute("data-is-current");const n=r.querySelector(`a[href='#${encodeURI(e.target.id)}']`);n&&n.parentElement.setAttribute("data-is-current","true")}})},{root:null,rootMargin:"-50% 0px",threshold:0});[].slice.call(d).forEach(e=>{h.observe(e)})}t.appendChild(l[0].tree),r.setAttribute("aria-hidden","false"),r.setAttribute("data-initialized","true")}}}};function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={headings:document.querySelectorAll("h2, h3, h4, h5, h6"),moveToBefore1stHeading:!0};const r={};for(const i in n)r[i]=(void 0!==t[i]?t:n)[i];if("string"!=typeof e)return!0==e instanceof NodeList?l(e,r):!0==e instanceof HTMLElement?d(e,r):void 0;if(e.match(/^#/)){var o=document.querySelector(e);if(o)return d(o,r)}else{e=document.querySelectorAll(e);if(!(e.length<1))return l(e,r)}}return r});
