!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ContentsOutline=t()}(this,function(){"use strict";var a=function(e,n){var i=[];return[].slice.call(e).forEach(function(e){var t=new r(e,n);t&&i.push(t)}),i},d=function(e,t){var n,i,c,a,d,l,u,s,r;"true"===e.getAttribute("data-initialized")||(n=e.querySelector(".contents-outline"))&&(t.headings.length<1&&e.parentNode.removeChild(e),t.headings.sort(function(e,t){return e.getBoundingClientRect().top-t.getBoundingClientRect().top}),i=0,[].slice.call(t.headings).forEach(function(e){var t;e.getAttribute("id")||(t=function e(t,n){return document.getElementById("".concat(t).concat(n))?e(t,n+1):n}("co-index-",i),e.setAttribute("id","co-index-".concat(t)),i=t+1)}),c=function(e){return parseInt(e.tagName.replace("H",""))},a=0,d=[].slice.call(t.headings).slice(1)[0],l=[document.createElement("ol")],u=[c(d)],s=function(e){var t=document.createElement("li"),n=document.createElement("a");return n.textContent=e.textContent.replace(/[\n\r]/g,""),n.setAttribute("href","#".concat(e.getAttribute("id"))),t.appendChild(n),t},[].slice.call(t.headings).forEach(function(e){return t=e,r=c(d),o=c(t),r<o?a++:o<r&&(u[a=a-(n=r-o)<0?0:a-n]<o&&a++),l[a]&&(0===a||u[a]<o)?l[a].appendChild(s(t)):((i=document.createElement("ol")).appendChild(s(t)),[].slice.call(l[a-1].children).slice(-1)[0].appendChild(i),l[a]=i),(!u[a]||u[a]>o)&&(u[a]=o),void(d=t);var t,n,i,r,o}),!0===t.moveToBefore1stHeading&&(r=t.headings[0]).parentNode.insertBefore(e,r),n.appendChild(l[0]),e.setAttribute("aria-hidden","false"),e.setAttribute("data-initialized","true"))};function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={headings:document.querySelectorAll("h2, h3, h4, h5, h6"),moveToBefore1stHeading:!0},i={};for(var r in n)i[r]=void 0!==t[r]?t[r]:n[r];if("string"!=typeof e)return!0==e instanceof NodeList?a(e,i):!0==e instanceof HTMLElement?d(e,i):void 0;if(e.match(/^#/)){var o=document.querySelector(e);if(!o)return;return d(o,i)}var c=document.querySelectorAll(e);return c.length<1?void 0:a(c,i)}return r});
