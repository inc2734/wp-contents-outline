!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ContentsOutline=t()}(this,function(){"use strict";var a=function(e,n){var i=[];return[].slice.call(e).forEach(function(e){var t=new r(e,n);t&&i.push(t)}),i},d=function(e,t){var n,i,r,o,c,a,d,l,u,f;"true"===e.getAttribute("data-initialized")||(n=e.querySelector(".contents-outline"))&&(t.headings.length<1&&e.parentNode.removeChild(e),t.headings.sort(function(e,t){return e.getBoundingClientRect().top-t.getBoundingClientRect().top}),i=0,[].slice.call(t.headings).forEach(function(e){var t;e.getAttribute("id")||(t=function e(t,n){return document.getElementById("".concat(t).concat(n))?e(t,n+1):n}("co-index-",i),e.setAttribute("id","co-index-".concat(t)),i=t+1)}),r=function(e){return e?parseInt(e.tagName.replace("H","")):void 0},a=[{level:c=void(o=0),tree:document.createElement("ol")}],d=function(e){var t=document.createElement("li"),n=document.createElement("a");return n.textContent=e.textContent.replace(/[\n\r]/g,""),n.setAttribute("href","#".concat(e.getAttribute("id"))),t.appendChild(n),t},l=function(e){var t,n;a[o]?a[o].tree.appendChild(d(e)):(a[o]={},a[o].tree=(t=e,(n=document.createElement("ol")).appendChild(d(t)),n),[].slice.call(a[o-1].tree.children).slice(-1)[0].appendChild(a[o].tree)),a[o].level=r(e)},u=function(e){var t,n=r(c),i=r(e);n<i?o++:i<n&&(o=a[o=(o=o-n-i)<0?0:o].level<i?o+1:o,t=a[0],(a=[])[0]=t),l(e),c=e},[].slice.call(t.headings).forEach(u),!0===t.moveToBefore1stHeading&&(f=t.headings[0]).parentNode.insertBefore(e,f),n.appendChild(a[0].tree),e.setAttribute("aria-hidden","false"),e.setAttribute("data-initialized","true"))};function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={headings:document.querySelectorAll("h2, h3, h4, h5, h6"),moveToBefore1stHeading:!0},i={};for(var r in n)i[r]=void 0!==t[r]?t[r]:n[r];if("string"!=typeof e)return!0==e instanceof NodeList?a(e,i):!0==e instanceof HTMLElement?d(e,i):void 0;if(e.match(/^#/)){var o=document.querySelector(e);if(!o)return;return d(o,i)}var c=document.querySelectorAll(e);return c.length<1?void 0:a(c,i)}return r});
